{"customJarBeforeModification":"","description":"Made some changes","originalCustomJarName":"","processors":[{"configured":true,"canChangeSchema":"false","coordinates":[210,10],"className":"com.streamanalytix.spark.ss.processor.StructuredStreamingProcessor","channelType":"single","label":"Filter    entries   above 99 accuracy ","inputDStreamType":"plain","type":"processor","messageTypes":["ExpressionEvaluator_675816"],"projectDetails":{"projectName":"SATest_1631229588135","projectDisplayName":"SATest","projectVersion":1},"emitStreamIds":[{"emitStreamId":"defaultStream","outputFields":["tracemessage"],"applyFilter":false,"filterCriteria":[],"componentId":"JDBCEmitter_332734"},{"emitStreamId":"saxErrorStream","outputFields":["tracemessage","streamIds"],"applyFilter":false,"filterCriteria":[],"componentId":"deadLaterChannel"}],"groupings":[{"type":"shuffle","componentId":"ExpressionEvaluator_675816","groupFields":[],"streamId":"defaultStream"}],"appType":"structuredstreaming","messageTypeId":"tracemessage","name":"FilterProcessor_309511","id":"filter-processor","outputDStreamType":"plain","config":{"parentTag":"\/","mvelfnclist":[],"saxInspect":{"datasetIds":{"inputdatasetId":["ExpressionEvaluator_675816"],"outputdatasetId":["FilterProcessor_309511"]},"referenceSchemaId":{"inputSchemaId":["ExpressionEvaluator_675816"],"outputSchemaId":["ExpressionEvaluator_675816"]},"detectSchema":false},"connectionConfig":{},"expfldlst":"","operatorType":"processor","configFields":"","executorPlugin":"com.streamanalytix.spark.ss.helper.FilterHelper","subsystemName":"CNCMillSparkMLConditionalTraining","filterQuery":{"rules":[{"message":"ExpressionEvaluator_675816","filterNegate":false,"filterQuery":"SELECT * FROM FilterProcessor_309511 WHERE(`accuracy` < 0.99)","filterJSON":{"condition":"AND","rules":[{"id":"","field":"accuracy","type":"double","input":"","operator":"less","value":["0.99"]}]},"filterQueryFields":"accuracy"}]}},"errorConfig":{"partitions":"","connectionName":"Default","connectionId":"98e430ce-b0a5-4e78-9179-a45376431e49","componentType":"rabbitmq","errorLogTarget":"rabbitmq","replicationFactor":"","queueName":"CNCMillSparkMLConditionalTraining_sax_error-CNCMillSparkMLConditionalTraining_sax_error","topicName":"","isErrorHandlingRequired":true}},{"configured":true,"canChangeSchema":"true","coordinates":[110,10],"className":"com.streamanalytix.spark.ss.processor.StructuredStreamingProcessor","channelType":"single","label":"Insert    Prediction Time Stamp","inputDStreamType":"plain","type":"processor","messageTypes":["hive_96396"],"projectDetails":{"projectName":"SATest_1631229588135","projectDisplayName":"SATest","projectVersion":1},"emitStreamIds":[{"emitStreamId":"defaultStream","outputFields":["tracemessage"],"applyFilter":false,"filterCriteria":[],"componentId":"FilterProcessor_309511"},{"emitStreamId":"saxErrorStream","outputFields":["tracemessage","streamIds"],"applyFilter":false,"filterCriteria":[],"componentId":"deadLaterChannel"}],"groupings":[{"type":"shuffle","componentId":"hive_96396","groupFields":[],"streamId":"defaultStream"}],"appType":"structuredstreaming","messageTypeId":"tracemessage","name":"ExpressionEvaluator_675816","id":"expression-evaluator-processor","outputDStreamType":"plain","config":{"operations":[{"columnName":"prediction_time","label":"CURRENT_TIMESTAMP","expression":"CURRENT_TIMESTAMP"}],"outputMessage":"hive_96396","parentTag":"\/","mvelfnclist":[],"saxInspect":{"datasetIds":{"inputdatasetId":["hive_96396"],"outputdatasetId":["ExpressionEvaluator_675816"]},"referenceSchemaId":{"inputSchemaId":["hive_96396"],"outputSchemaId":["ExpressionEvaluator_675816"]},"detectSchema":false},"connectionConfig":{},"expfldlst":"","operatorType":"processor","executorPlugin":"com.streamanalytix.spark.ss.processor.ExpressionEvaluatorProcessor","subsystemName":"CNCMillSparkMLConditionalTraining"},"errorConfig":{"partitions":"","connectionName":"Default","connectionId":"98e430ce-b0a5-4e78-9179-a45376431e49","componentType":"rabbitmq","errorLogTarget":"rabbitmq","replicationFactor":"","queueName":"CNCMillSparkMLConditionalTraining_sax_error-CNCMillSparkMLConditionalTraining_sax_error","topicName":"","isErrorHandlingRequired":true}},{"configured":true,"coordinates":[310,10],"className":"com.streamanalytix.spark.ss.processor.StructuredStreamingProcessor","channelType":"single","label":"save data in Postgresql DB","inputDStreamType":"both","currentAppType":"batch","type":"emitter","messageTypes":["ExpressionEvaluator_675816"],"projectDetails":{"projectName":"SATest_1631229588135","projectDisplayName":"SATest","projectVersion":1},"emitStreamIds":[{"emitStreamId":"saxErrorStream","outputFields":["tracemessage","streamIds"],"applyFilter":false,"filterCriteria":[],"componentId":"deadLaterChannel"}],"groupings":[{"type":"shuffle","componentId":"FilterProcessor_309511","groupFields":[],"streamId":"defaultStream"}],"subtype":"","appType":"structuredstreaming","messageTypeId":"tracemessage","name":"JDBCEmitter_332734","id":"jdbc-emitter","outputDStreamType":"both","config":{"messageName":"ExpressionEvaluator_675816","processingTimeUnit":"","schemaName":"dfml","tableName":"cnc_mill_prediction_accuracy","saxInspect":{"datasetIds":{"inputdatasetId":["FilterProcessor_309511"],"outputdatasetId":["JDBCEmitter_332734"]},"referenceSchemaId":{"inputSchemaId":["ExpressionEvaluator_675816"],"outputSchemaId":["ExpressionEvaluator_675816"]}},"connectionJson":"{\"databaseType\":\"postgresql\",\"password\":\"791+ugi2G\/7hC4\/KkQ1IJw==\",\"driver\":\"\",\"databaseName\":\"demoenv\",\"port\":\"5432\",\"host\":\"dfml40b2-app1-cent.hmazx14gwriu1lqmftqf1vlbvf.bx.internal.cloudapp.net\",\"connectionURL\":\"\",\"inspectQuery\":\"\",\"connectionConfig\":{},\"tableListQuery\":\"\",\"username\":\"ra\"}","scope":[],"mappedSchema":[{"encode":null,"sqlType":2,"sortKey":null,"isIgnore":"false","dataType":"numeric","isPrimaryKey":"false","columnValue":null,"value":"accuracy","columnName":"accuracy","distKey":null},{"encode":null,"sqlType":93,"sortKey":null,"isIgnore":"false","dataType":"timestamp","isPrimaryKey":"false","columnValue":null,"value":"prediction_time","columnName":"prediction_time","distKey":null}],"reuseDataset":false,"ignoreActionError":false,"datasetChange":"NONE","scopeDetails":{"scope":[],"owner":"superuser","projectName":"SATest"},"datasetTransformer":"com.streamanalytix.bs.dataset.service.impl.JDBCEmitterDSTransformer","isTimeBasedCheckPoint":false,"mvelfnclist":[],"maxConnectionRetry":"3","datasetName":[],"trigger":false,"processingTime":"","saveMode":"append","checkpointLocation":"","datasetSourceType":"JDBC","checkpointConnectionId":"","parentTag":"\/","connectionRetryDelay":"30000","ignoreWhileExecution":false,"connectionId":"c0a66761-a286-46b7-99a8-44924acd17aa","outputmode":"append","dataStore":"jdbc","connectionConfig":{},"expfldlst":"","connectionName":"PostgresqlDB","operatorType":"processor","batchSize":"1000","saveAsDataset":false,"checkpointConnectionType":"","executorPlugin":"com.streamanalytix.spark.ss.helper.JdbcEmitterHelper","subsystemName":"CNCMillSparkMLConditionalTraining","isBatchEnable":"true"},"errorConfig":{"partitions":"","connectionName":"Default","connectionId":"98e430ce-b0a5-4e78-9179-a45376431e49","componentType":"rabbitmq","errorLogTarget":"rabbitmq","replicationFactor":"","queueName":"CNCMillSparkMLConditionalTraining_sax_error-CNCMillSparkMLConditionalTraining_sax_error","topicName":"","isErrorHandlingRequired":true}}],"projectDetails":{"projectName":"SATest_1631229588135","projectDisplayName":"SATest","projectVersion":1},"esperHAEnabled":false,"gitrepourl":"https:\/\/github.com\/maximuslee1226\/DFML4.0","topologySupervisors":[],"gitbranch":"refs\/heads\/main","engine":"spark","alert":{"added":[],"updated":[],"deleted":[]},"appType":"batch","isReplayAlter":false,"scheduling":null,"id":"CNCMillSparkMLConditionalTraining","gitcommitid":"b3d572b0ca732ff1e9227466cacef384006c6ecc","connections":["c0a66761-a286-46b7-99a8-44924acd17aa","96e06e4f-cec7-4ea0-9276-1dd58fb354e5"],"iscreatVersionChecked":false,"date_created":1634232217349,"sessionId":"B879239B17299BC3D91331B61F9FAF53","gitcommiturl":"https:\/\/github.com\/maximuslee1226\/DFML4.0\/commit\/b3d572b0ca732ff1e9227466cacef384006c6ecc","versionNumber":4,"structure":"pipeline","parentVersionNumber":3,"customJarStatus":"","enableErrorHandler":true,"channels":[{"configured":true,"coordinates":[10,10],"className":"com.streamanalytix.spark.ss.receiver.SparkSSReceiver","channelType":"single","label":"Model     accuracy query","inputDStreamType":"na","type":"channel","messageTypes":["hive_96396"],"projectDetails":{"projectName":"SATest_1631229588135","projectDisplayName":"SATest","projectVersion":1},"emitStreamIds":[{"emitStreamId":"defaultStream","outputFields":["tracemessage","streamIds"],"applyFilter":false,"filterCriteria":[],"componentId":"ExpressionEvaluator_675816"},{"emitStreamId":"saxErrorStream","outputFields":["tracemessage","streamIds"],"applyFilter":false,"filterCriteria":[],"componentId":"deadLaterChannel"}],"groupings":[],"appType":"structuredstreaming,ssbatch","messageTypeId":"tracemessage","name":"hive_96396","id":"hive-channel","schemaIdentifier":"com.streamanalytix.engine.core.scheme.util.DefaultSchemaIdentifier","outputDStreamType":"plain","config":{"refreshHiveTableNames":"","enablePartitioning":false,"upperBound":"2","maxRecordCount":"","oldToNewColumnNameMapping":{},"sourceHeader":false,"maxColumnValue":"","channelPlugin":"com.streamanalytix.spark.ss.receiver.HWCSource","isSystemModstampChecked":false,"sqlInspectQuery":"","enableIncrementalRead":false,"delimiter":",","saxInspect":{"typeOfSchemaDetection":"readFromSource","datasetIds":{"inputdatasetId":[],"outputdatasetId":["hive_96396"]},"detectSchema":false,"header":false,"referenceSchemaId":{"inputSchemaId":[],"outputSchemaId":["hive_96396"]},"rowCount":100,"samplingMethod":"topN","triggerTime":"3 seconds"},"connectionJson":"{\"keyTabSelectOption\":null,\"warehouseDIR\":\"\/user\/hive\/warehouse\",\"hiveServer2_password\":\"BQGHoM3lqYcsurCRq3PlUw==\",\"uploadKeyTabFile\":\"\",\"hive.warehouse.load.staging.dir\":\"\/tmp\",\"fsURI\":\"hdfs:\/\/mycluster\",\"haEnabled\":\"true\",\"namenode1Name\":\"nn1\",\"namenode1RPCAddress\":\"hn0-dfml.hmazx14gwriu1lqmftqf1vlbvf.bx.internal.cloudapp.net:8020\",\"namenode2RPCAddress\":\"hn1-dfml.hmazx14gwriu1lqmftqf1vlbvf.bx.internal.cloudapp.net:8020\",\"metaStoreURI\":\"thrift:\/\/hn0-dfml.hmazx14gwriu1lqmftqf1vlbvf.bx.internal.cloudapp.net:9083,thrift:\/\/hn1-dfml.hmazx14gwriu1lqmftqf1vlbvf.bx.internal.cloudapp.net:9083\",\"tableAdministration\":\"true\",\"hiveServer2\":\"jdbc:hive2:\/\/zk0-dfml.hmazx14gwriu1lqmftqf1vlbvf.bx.internal.cloudapp.net:2181,zk1-dfml.hmazx14gwriu1lqmftqf1vlbvf.bx.internal.cloudapp.net:2181,zk3-dfml.hmazx14gwriu1lqmftqf1vlbvf.bx.internal.cloudapp.net:2181\/;serviceDiscoveryMode=zooKeeper;zooKeeperNamespace=hiveserver2-interactive\",\"keyTabFilePath\":\"\",\"zkKeyTabFileLocation\":\"\",\"connectionConfig\":{},\"hive.zookeeper.quorum\":\"zk0-dfml.hmazx14gwriu1lqmftqf1vlbvf.bx.internal.cloudapp.net:2181,zk1-dfml.hmazx14gwriu1lqmftqf1vlbvf.bx.internal.cloudapp.net:2181,zk3-dfml.hmazx14gwriu1lqmftqf1vlbvf.bx.internal.cloudapp.net:2181\",\"hive.llap.daemon.service.hosts\":\"@llap0\",\"downloadKeytabFileLocation\":\"\",\"namenode2Name\":\"nn2\",\"username\":\"hdfs\",\"nameservices\":\"mycluster\"}","mappedSchema":[],"ignoreActionError":false,"partitions":"1","datasetTransformer":"com.streamanalytix.bs.dataset.service.impl.QueryChannelDSTransformer","refreshHiveTable":false,"mvelfnclist":[],"query":"select 1 - (t1.different \/t2.total_records) as accuracy from (select count(*) as different from cnc_mill_tool_gbt_predication where tool_condition <> tool_condition_predicted_str) t1, (select count(*) as total_records from cnc_mill_tool_gbt_predication) t2","datasetName":"","incrementalOffset":{"colToCheck":"","currentValue":"","readControlType":"none","maxColumnValue":"","maxRecordCount":"","enableIncrementalRead":false,"isSystemModstampChecked":false},"datasetSelectVersion":"0","readControlType":"none","dateTypeColumnMessageMapping":"","parserType":"DELIMITED","datasetSelected":"","datasetSourceType":"Hive","parentTag":"\/","tenantId":"","ignoreWhileExecution":false,"connectionId":"96e06e4f-cec7-4ea0-9276-1dd58fb354e5","isBatchEnabled":"true","connectionConfig":{},"lowerBound":"1","partitioningColumn":"","expfldlst":"","connectionName":"Default","operatorType":"receiver","saveAsDataset":false,"dataSource":"hive","subsystemName":"CNCMillSparkMLConditionalTraining","s3ConnectionName":""},"errorConfig":{"partitions":"","connectionName":"Default","connectionId":"98e430ce-b0a5-4e78-9179-a45376431e49","componentType":"rabbitmq","errorLogTarget":"rabbitmq","replicationFactor":"","queueName":"CNCMillSparkMLConditionalTraining_sax_error-CNCMillSparkMLConditionalTraining_sax_error","topicName":"","isErrorHandlingRequired":true}}],"templateName":"","displayColumnsMap":{"hive_96396":{"hive_96396":{"allCols":[],"displayCols":["accuracy"],"types":{},"uniqueValues":{}}},"FilterProcessor_309511":{"hive_96396":{"allCols":[],"displayCols":["accuracy"],"types":{},"uniqueValues":{}},"ExpressionEvaluator_675816":{"allCols":[],"displayCols":["accuracy"],"types":{},"uniqueValues":{}}},"ExpressionEvaluator_675816":{"ExpressionEvaluator_675816":{"allCols":[],"displayCols":["accuracy","prediction_time"],"types":{},"uniqueValues":{}}},"JDBCEmitter_332734":{"ExpressionEvaluator_675816":{"allCols":[],"displayCols":["accuracy","prediction_time"],"types":{},"uniqueValues":{}}}},"name":"CNCMillSparkMLConditionalTraining","tenantId":"1","isErrorModeNotified":false,"autoInspectSchema":{"hive_96396":[{"name":"accuracy","alias":"accuracy","dataType":"java.lang.Double","dateFormat":"yyyy-MM-dd HH:mm:ss","inputDateFormat":"yyyy-MM-dd HH:mm:ss","outputDateFormat":"yyyy-MM-dd HH:mm:ss","precision":10,"scale":0,"stringToDate":false,"isInputField":"Y","isTimestampField":"N","selected":true}],"ExpressionEvaluator_675816":[{"name":"accuracy","alias":"accuracy","dataType":"java.lang.Double","dateFormat":"yyyy-MM-dd HH:mm:ss","inputDateFormat":"yyyy-MM-dd HH:mm:ss","outputDateFormat":"yyyy-MM-dd HH:mm:ss","precision":10,"scale":0,"stringToDate":false,"isInputField":"Y","isTimestampField":"N","selected":true},{"name":"prediction_time","alias":"prediction_time","dataType":"java.sql.Timestamp","dateFormat":"yyyy-MM-dd HH:mm:ss","inputDateFormat":"yyyy-MM-dd HH:mm:ss","outputDateFormat":"yyyy-MM-dd HH:mm:ss","precision":10,"scale":0,"stringToDate":false,"isInputField":"Y","isTimestampField":"N","selected":true}]},"config":{"checkPointDirectory":"\/","eventLogDirectory":"\/","initialExecutors":"0","enableCheckPoint":"false","driverCores":"1","yarnAmCores":"1","batchDuration":"1000","yarnUser":"hdfs","executorCores":"2","dynamicAllocationEnabled":"false","clouderaLineage":false,"extraExecutorJavaOptions":"","isBatchPipeline":true,"executorInstances":"1","poolNname":"FIFO","taskMaxFailures":"4","driverPermGenSize":"512","autoInspection":false,"isDirty":false,"logLevel":"INFO","isImpersonationEnabled":false,"engine":"spark","receiverMaxRate":"","eventLogEnabled":"false","appCores":"2","maxExecutors":"-1","enableBackPressure":"","keyTabSelectOption":"specifyKeyTabFilePath","executorMemory":"512","deploymentMode":"yarn-cluster","driverMemory":"512","isConnectionMissing":false,"yarnAmMemory":"512","extraSparkSubmitOptions":"","receiverRateLimiter":"none","typeOfApplication":"structuredstreaming","extraDriverJavaOptions":"","keyTabFilePath":"","zkKeyTabFileLocation":"","downloadKeytabFileLocation":"","connectionName":"","enableResourceAnalyzer":false,"pipelineNotification":{"errors":{},"warnings":{},"recommendations":{}},"yarnQueue":"default"},"subsystemName":"CNCMillSparkMLConditionalTraining","customFileNames":"","status":"STOPPED","customJarName":"","failedReason":""}